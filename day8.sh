# part 1
cat input8.txt | awk '{ print NR " " length;y=NR;for(x=1;x<=length;x++) { ln[y]=length;t=substr($0,x,1);f[x][y]=t } for (i=1;i<=length;i++) { printf("%s",f[i][NR])}print ""} END { x=0;y=0;z=1;print "=====";for(y=1;y<=NR;y++) { for (x=1;x<=length(f[y]);x++) { for (s=y+1;s<=NR;s++) { if(f[x][s]>=f[x][y]){v[x][y][1]=0;break}else{v[x][y][1]=1}} for (n=y-1;n>=1;n--) { if(f[x][n]>=f[x][y]){v[x][y][2]=0;break}else{v[x][y][2]=1} }for (w=x+1;w<=length(f[y]);w++) { if(f[w][y]>=f[x][y]){v[x][y][3]=0;break}else{ v[x][y][3]=1}} for (e=x-1;e>=1;e--) { if(f[e][y]>=f[x][y]){v[x][y][4]=0;break} else {v[x][y][4]=1}  } if (x==1){v[x][y][4]=1} if(y==1){v[x][y][2]=1} if(y==NR){v[x][y][1]=1} if(x==ln[y]){v[x][y][3]=1}  for (i=1;i<=4;i++) { check[x][y] = check[x][y] "" v[x][y][i] } print "foo: " x "," y " " check[x][y]}} print "bar: " v[1][1][4]; print "end"}' | grep "foo:" | grep -v "0000" | wc -l

#part 2
cat input8.txt | awk '{ print NR " " length;y=NR;for(x=1;x<=length;x++) { ln[y]=length;t=substr($0,x,1);f[x][y]=t } for (i=1;i<=length;i++) { printf("%s",f[i][NR])}print ""} END { x=0;y=0;z=1;print "=====";for(y=1;y<=NR;y++) { for (x=1;x<=length(f[y]);x++) { for (s=y+1;s<=NR;s++) { vd[x][y][1]++;if(f[x][s]>=f[x][y]){v[x][y][1]=0;break}else{v[x][y][1]=1}} for (n=y-1;n>=1;n--) { vd[x][y][2]++;if(f[x][n]>=f[x][y]){v[x][y][2]=0;break}else{v[x][y][2]=1} }for (w=x+1;w<=length(f[y]);w++) { vd[x][y][3]++;if(f[w][y]>=f[x][y]){v[x][y][3]=0;break}else{ v[x][y][3]=1}} for (e=x-1;e>=1;e--) { vd[x][y][4]++;if(f[e][y]>=f[x][y]){v[x][y][4]=0;break} else {v[x][y][4]=1}  } if (x==1){v[x][y][4]=1} if(y==1){v[x][y][2]=1} if(y==NR){v[x][y][1]=1} if(x==ln[y]){v[x][y][3]=1}  for (i=1;i<=4;i++) { check[x][y] = check[x][y] "" vd[x][y][i] } print "foo: " x "," y " " check[x][y] " vd: " vd[x][y][1]*vd[x][y][2]*vd[x][y][3]*vd[x][y][4]}} print "bar: " v[1][1][4]; print "end"}' | grep "vd:" | awk '{ print $5 }' | sort -n | tail -1
